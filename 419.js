"use strict";(self.webpackChunkwebpages=self.webpackChunkwebpages||[]).push([[419],{8419:(e,t,a)=>{a.r(t),a.d(t,{default:()=>l});var i=a(865),o=a.n(i),r=a(578),d=a(2641);let n={view:e=>o()("div",o()("div.liquid-container.ember-view",{style:{top:"0px",left:"0px"}},o()("div.liquid-modal",o()("div.liquid-child",o()("div.lm-container",o()("div.lf-dialog",{role:"dialog"},o()("div.eventOverview.ember-view",o()("header.lf-dialog-header.needs-close-button.ember-view.atStatus-lec",o()("div",[e.attrs.product_name,e.attrs.owned?" (已拥有)":null]),o()("button.button--iconHeader.at-lf-dialog-header",{type:"button",onclick:e=>{e.preventDefault(),r.ZP.placeAppendPart(null)}},"✕")),o()("div.lf-dialog-content.ember-view",o()("div.eventOverview-timeDate-wrapper",o()("div",o()(r.ZP.doClassReplace("div.eventOverview-timeDate-right.bootstrap-iso"),e.attrs.product_image?o()("img",{src:e.attrs.product_image,width:"512",height:"128"}):null,o()("p",o().trust(e.attrs.product_detail))))),o()("div.eventOverview-separator"),o()("div.eventOverviewData-dataRow",o()("div.eventOverviewData-dataLabel","价格"),o()("div.eventOverviewData-dataValue","￥"+e.attrs.price)),o()("div.eventOverview-separator"),o()("div.eventOverviewData-dataRow",o()("div.eventOverviewData-dataLabel","作者"),o()("div.eventOverviewData-dataValue",e.attrs.author))),o()("footer.lf-dialog-footer.ember-view",e.attrs.owned||n.nocart?null:o()(r.ZP.doClassReplace("button.button.button--primary"),{onclick:()=>{(async()=>{let t=await d.Z.AddProductToCart(e.attrs.product_id);t.success?r.ZP.placeAppendPart(null):r.ZP.showAlert("错误",t.message)})()}},"加入购物车"),o()(r.ZP.doClassReplace("button.button.button--primary"),{onclick:()=>{r.ZP.placeAppendPart(null)}},"关闭")))))))))},s={productlist:[],ownedlist:[],page:1,havemore:!1,oninit:async()=>{let{products:e,owned:t}=await d.Z.GetProductList(0);s.productlist=e||[],s.ownedlist=t||[],o().redraw()},view:e=>{let t=[];for(let e of s.productlist){if(e.forbid_cart||!e.product_id)continue;let a=e;t.push(o()("div.chronos-agendaView-item.chronos-event--lec",o()("time.chronos-agendaView-item-time.chronos-agendaView-item-time--monospace"),o()("div.chronos-agendaView-item-infos.chronos-agendaView-item-infos-imageLess",o()("span.chronos-agendaView-item-title",{onclick:()=>{let e=a;-1!=s.ownedlist.indexOf(e.product_id)&&(e.owned=!0),r.ZP.placeAppendPart(o()(n,e))}},e.product_name))))}return o()(r.ZP.frame,{pageName:"商城",pageIcon:'<svg class="sectionTitle-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M352 128C352 57.42 294.579 0 224 0 153.42 0 96 57.42 96 128H0v304c0 44.183 35.817 80 80 80h288c44.183 0 80-35.817 80-80V128h-96zM224 48c44.112 0 80 35.888 80 80H144c0-44.112 35.888-80 80-80zm176 384c0 17.645-14.355 32-32 32H80c-17.645 0-32-14.355-32-32V176h48v40c0 13.255 10.745 24 24 24s24-10.745 24-24v-40h160v40c0 13.255 10.745 24 24 24s24-10.745 24-24v-40h48v256z"></path></svg>'},o()("div.ember-view",o()("div.chronos",o()("div.chronos-events",o()(r.ZP.doClassReplace("div.chronos-agendaView"),o()("time.chronos-agendaView-header","商品列表"),o()("div#productList",t),o()("div",{style:{"text-align":"center",display:s.havemore?void 0:"none"}},o()(r.ZP.doClassReplace("button.button.at-sidebarUser"),{onclick:()=>{s.havemore=!1,(async()=>{let{products:e}=await d.Z.GetProductList(s.page);s.page++,0!=e.length&&(s.havemore=!0);for(let t of e)s.productlist.push(t);o().redraw()})()}},"加载更多")),o()("br"))))))}};const l=s}}]);