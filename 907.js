"use strict";(self.webpackChunkwebpages=self.webpackChunkwebpages||[]).push([[907],{2907:(e,a,r)=>{r.r(a),r.d(a,{default:()=>u});var t=r(5143),l=r.n(t),n=r(865),i=r.n(n),p=r(2641);let o=null,c={can_pay:!1,paired:!1,pay_error:"",pay_fatal:!1,pay_success:!1,pay_invoice_id:"",ticket_id:"",oninit:e=>{c.ticket_id=e.attrs.ticket,c.can_pay=!1,c.paired=!1,c.pay_error="",c.pay_fatal=!1,c.pay_success=!1,o&&(clearInterval(o),o=null)},onremove:()=>{o&&(clearInterval(o),o=null)},view:e=>i()(l().login_frame,i()("div.lowin-box.lowin-login",i()("div.lowin-box-inner",i()("form.login-form",i()("p","登录到 FastBuilder 用户中心"),i()("p","￥6 的罚款已被附加到你的账户，理由如以下所示。"),i()("p",i()("b",{style:{color:"red"}},e.attrs.reason)),i()("p","要继续使用这个账户，你需要缴纳这笔罚款。"),c.can_pay?[i()("p","您正在支付: 用户协议违反罚款"),c.paired?null:[i()("p","请联系代理并告知其你的用户名，在其确认前请勿支付。"),i()("p",["或者：",i()("a",{href:"https://fs.webapp.codepwn.xyz/new",target:"_blank",style:{display:"inline-block"}},"自助结算[微信/支付宝] (提供: CodePwn)")]),i()("p",[i()("a",{href:"/api/v2/stripe/pay_ticket.web?ticketID="+c.ticket_id},"银行卡结算")])],c.pay_success?[i()("p","支付成功，您的账号已经恢复正常，请点击 [退出登录] 按钮，然后重新登录。")]:[c.pay_error?i()("p",{style:{color:"red"}},c.pay_error):null,c.paired?i()("p",{style:{color:"blue"}},"请支付: ￥6"):null,c.pay_fatal?null:[c.pay_success?null:i()("div.lowin-buttondiv",i()("button.lowin-btn",{onclick:async e=>{e.preventDefault(),s(!0)}},"刷新状态"),i()("hr"))]]]:i()("div.lowin-buttondiv",i()("button.lowin-btn",{onclick:async a=>{a.preventDefault();let r=await p.Z.PayTicket(e.attrs.ticket);r.success?(c.can_pay=!0,o=setInterval(s,1e3),i().redraw()):alert(r.message)}},"缴纳罚款"),i()("hr")),i()("div.lowin-buttondiv",i()("button.lowin-btn",{onclick:e=>{e.preventDefault(),i().route.set("/login")}},"退出登录"))))))};async function s(e){let a=await p.Z.CheckTicketPayment(c.ticket_id);if(a.error)return o&&clearInterval(o),o=null,alert(a.error_message),c.pay_fatal=!0,void i().redraw();if(!c.paired){if(!a.paired)return void(e&&(c.pay_error=a.message,i().redraw()));c.pay_error="",c.paired=!0,i().redraw(),e=!1}a.success?(c.pay_error="",c.pay_success=!0,clearInterval(o),o=null,i().redraw()):e&&(c.pay_error="尚未成功",i().redraw())}const u=c}}]);